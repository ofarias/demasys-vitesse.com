{% extends 'base.html' %}
{% load i18n %}
{% load url from future %}
{% load i18n humanize %}



{% block title %}{{action}} Solicitud{% endblock %}
{% block content_title %} Solicitud de Fondos   


{% endblock %}

{% block nav-sol2 %}<li class="active">{% endblock %} <!-- se debe definir en Base.html para que se seleccione-->

{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/bootstrap-datepicker/css/datepicker3.css">
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/select2/select2.css"/>

{% endblock %}

{% block breadcrumb %}
<ul class="page-breadcrumb">
	<li>
		<i class="fa fa-home"></i>
		<a href="{% url 'dashboards.views.index' %}">Dashboard</a>
		<i class="fa fa-angle-right"></i>
	</li>
	<li>
		<a href="{% url 'solicitudes.views.index' %}">Solicitudes</a>	<!-- Esto se cambia con la vista de la aplicacion actual, que debe tener la classe Index-->
		<i class="fa fa-angle-right"></i>
	</li>
	<li>
		<a href="#">{{action}}</a>
	</li>


</ul>
{% endblock %}


{% block actions %}
{% endblock %}
{% block content %}

<div class="portlet box grey-cascade">
	<div style=" text-align:center; font-size: 20px; font-family: 'Open Sans',sans-serif; color:white;">
										<div class="portlet-title">
											<div class="caption" >
								Saldos
							</div>							
						</div>
						</div>
						


<div class="table-responsive">		
							<table class="table table-striped table-hover table-bordered" id="regreso_table">
								<thead>
									<tr>
										<th style=" text-align:center;">
										Efectivo Contabilidad
										</th>
										<th style=" text-align:center;">
										Vales Contabilidad
										</th>
										<th style=" text-align:center;">
										Transferencia Contabilidad
										</th>
										<th style=" text-align:center;">
										Efectivo Operaciones 
										</th>
										<th style=" text-align:center;">
										Vales Operaciones
										</th>
										<th style=" text-align:center;">
										Transferencia Operaciones
										</th>
									</tr>
								</thead>
								<tbody>
									<tr class="tr_form_ap">
										<td style=" text-align:center;">
											{{saldoEfectivo}}
										</td>
										<td style=" text-align:center;">
											{{saldoVale}}
										</td>
										<td style=" text-align:center;">
											{{saldoTransferencia}}
										</td>
										<td style=" text-align:center;">
											{{saldoEO}}
										</td>
										<td style=" text-align:center;">
											{{saldoVO}}
										</td>
										<td style=" text-align:center;">
											{{saldoTO}}
										</td>
										</tr>						
									</tbody>
								</table>
							</div>

 </div>

{{user}}
{{saldo}}
{{ user.groups.all}}

  	<form action="" id="formularioDato" class="form-horizontal form-row-seperated" method="post">   <!--  se anexa el id = -->
											{% csrf_token %}
											<div class="form-body">
													<div class="form-group {% if form.solicitante.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">{{form.solicitante.label}}<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.solicitante}}
														{% if form.solicitante.errors %}<span class="help-block">{{form.solicitante.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.beneficiario.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Operadores<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.beneficiario}}
														{% if form.beneficiario.errors %}<span class="help-block">{{form.beneficiario.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.benef_otros.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Beneficiario<span class="required" aria-required="False"> * </span></label>
													<div class="col-md-9">
														{{form.benef_otros}}
														{% if form.benef_otros.errors %}<span class="help-block">{{form.benef_otros.errors}}</span>{% endif %}
													</div>
												</div>


												<div class="form-group {% if form.motivo_rech.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Banco<span class="required" aria-required="False">  </span></label>
													<div class="col-md-3">
														<input id="id_bco" type="text" name="bnco" class="form-control" value="{{bancoVal}}" disabled>
													</div>

												 </div>

												<div class="form-group {% if form.motivo_rech.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Cuenta<span class="required" aria-required="False">  </span></label>
													<div class="col-md-3">
														<input id="id_cta" type="text" name="valcta" class="form-control" value="{{cuentaVal}}" disabled>
													</div>
												 </div>

												  <div class="form-group {% if form.fecha.errors %}has-error{% endif %}">
												<label class="control-label col-md-3">Fecha de Solicitud<span class="required" aria-required="true"> * </span></label>
												<div class="col-md-9">
													<div class="input-group date date-picker" data-date-format="dd-mm-yyyy">
														{{form.fecha}}
														<span class="input-group-btn">
														  <button class="btn blue" type="button">
														       <i class="fa fa-calendar"></i>
														  </button>
														</span>
													 </div>
														{% if form.fecha.errors %}<span class="help-block">{{form.fecha.errors}}</span >{% endif %}
													</div >
												</div>
												<div class="form-group {% if form.importe.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Importe<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.importe_asig}}
														{% if form.importe_asig.errors %}<span class="help-block">{{form.importe_asig.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.concepts.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Concepto<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.concepts}}
														{% if form.concepts.errors %}<span class="help-block">{{form.concepts.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.refer.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Referencia<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.refer}}
														{% if form.refer.errors %}<span class="help-block">{{form.refer.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.sol_bill.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Carta Porte<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.sol_bill}}
														{% if form.sol_bill.errors %}<span class="help-block">{{form.sol_bill.errors}}</span>{% endif %}
													</div>
												 </div>
											
												 <div class="form-group {% if form.fecha_aut.errors %}has-error{% endif %}">
												<label class="control-label col-md-3">Fecha de Aprobacion/Rechazo<span class="required" aria-required="true"> * </span></label>
												<div class="col-md-9">
													<div class="input-group date date-picker" data-date-format="dd-mm-yyyy">
														{{form.fecha_aut}}
														<span class="input-group-btn">
														  <button class="btn blue" type="button">
														       <i class="fa fa-calendar"></i>
														  </button>
														</span>
													 </div>
														{% if form.fecha_aut.errors %}<span class="help-block">{{form.fecha_aut.errors}}</span >{% endif %}
													</div >
												</div>
												 <div class="form-group {% if form.motivo_rech.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Motivo de Rechazo<span class="required" aria-required="False">  </span></label>
													<div class="col-md-9">
														{{form.motivo_rech}}
														{% if form.motivo_rech.errors %}<span class="help-block">{{form.motivo_rech.errors}}</span>{% endif %}
													</div>
												 </div>
												 <div class="form-group {% if form.cliente_paga.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Paga Cliente<span class="required" aria-required="false"> </span></label>
													<div class="col-md-9">
														{{form.cliente_paga}}
														{% if form.cliente_paga.errors %}<span class="help-block">{{form.cliente_paga.errors}}</span>{% endif %}
													</div>
												</div>	
												<div class="form-group {% if form.kilometraje.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Kilometraje<span class="required" aria-required="false"> </span></label>
													<div class="col-md-9">
														{{form.kilometraje}}
														{% if form.kilometraje.errors %}<span class="help-block">{{form.kilometraje.errors}}</span>{% endif %}
													</div>
												</div>
												 <div class="form-group {% if form.id_unidad.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Unidad<span class="required" aria-required="false">  </span></label>
													<div class="col-md-9">
														{{form.id_unidad}}
														{% if form.id_unidad.errors %}<span class="help-block">{{form.id_unidad.errors}}</span>{% endif %}
													</div>
												</div>	
												<div class="form-group {% if form.importe_asig.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Importe Asignado<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.importe_asig}}
														{% if form.importe_asig.errors %}<span class="help-block">{{form.importe_asig.errors}}</span>{% endif %}
													</div>
												 </div>
												 <div class="form-group {% if form.forma_pago.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Forma de Pago<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.forma_pago}}
														{% if form.forma_pago.errors %}<span class="help-block">{{form.forma_pago.errors}}</span>{% endif %}
													</div>
												 </div>
												<!-- Selecccion partidas FIN -->
												<div class="form-group {% if form.forma_pago.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Forma de Pago Contable<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.partida}}
														{% if form.partida.errors %}<span class="help-block">{{form.partida.errors}}</span>{% endif %}
													</div>
												 </div>
												<!-- Selecccion partidas FIN -->

												<!-- Selecccion area FIN -->
												<div class="form-group {% if form.forma_pago.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Area<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-9">
														{{form.areas}}
														{% if form.areas.errors %}<span class="help-block">{{form.areas.errors}}</span>{% endif %}
													</div>
												 </div>
												<!-- Selecccion area FIN -->


												 <div class="form-group {% if form.fecha_asig.errors %}has-error{% endif %}">
												<label class="control-label col-md-3">Fecha de Asignacion <span class="required" aria-required="true"> * </span></label>
												<div class="col-md-9">
													<div class="input-group date date-picker" data-date-format="dd-mm-yyyy">
														{{form.fecha_asig}}
														<span class="input-group-btn">
														  <button class="btn blue" type="button">
														       <i class="fa fa-calendar"></i>
														  </button>
														</span>
													 </div>
														{% if form.fecha_asig.errors %}<span class="help-block">{{form.fecha_asig.errors}}</span >{% endif %}
													</div >
												</div>
											<div class="form-actions">
												<div class="row">
													<div class="col-md-offset-3 col-md-9">
														<button type="submit" class="btn blue"><i class="fa fa-pencil"></i> {{action}}</button>
													</div>
												</div>
											</div>

										</form>
{% endblock %}



{% block extra_script %}
<script type="text/javascript" src="{{MEDIA_URL}}plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}plugins/select2/select2.js"></script>
{% endblock %}

{% block script_ready %}



$('#id_benef_otros').bind('change', function () {
	var llave = $('#id_benef_otros').val();
	$.ajax({
            url : '{% url 'solicitudes.views.cuenta_banco' %}',
            type : "POST",
            data : { pk : llave },
            success : function(json) {
				$('#id_bco').val(json.bancoVal);
				$('#id_cta').val(json.cuentaVal);
            }

	});
});

	$('.date-picker').datepicker({
        rtl: Metronic.isRTL(),
        orientation: "auto",
        autoclose: true
    });



{% endblock %}
