{% extends 'base.html' %}
{% load i18n %}
{% load sepomex_filters %}
{% load url from future %}
{% load bootstrap_pagination %}

{% block title %}Subir PDF{% endblock %}
{% block content_title %} Subir Archivo PDF{% endblock %}

{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/bootstrap-datepicker/css/datepicker3.css"/>
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/select2/select2.css"/>
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/jquery-multi-select/css/multi-select.css"/>

{% endblock %}

{% block nav-viajes %}<li class="active">{% endblock %}

{% block breadcrumb %}
<ul class="page-breadcrumb">
	<li>
		<i class="fa fa-home"></i>
		<a href="{% url 'dashboards.views.index' %}">Dashboard</a>    
		<i class="fa fa-angle-right"></i>                    
	</li>
	<i class="icon-rocket"></i>
	<li>        
		Viajes
		<i class="fa fa-angle-right"></i>                        
	</li>
<i class="fa fa-file-pdf-o"></i>
	<li>       
		Subir Archivo PDF                        
	</li>    
</ul>
{% endblock %}

{% block actions %}
{% endblock %}

{% block content %}
<div class="modal fade" id="history" role="basic" aria-hidden="true">
	<div class="page-loading page-loading-boxed">
		<img src="{{MEDIA_URL}}img/loading-spinner-grey.gif" alt="" class="loading">
		<span>
			&nbsp;&nbsp;Cargando... </span>
		</div>
		<div class="modal-dialog">
			<div class="modal-content">
			</div>
		</div>
	</div>
	<div class="portlet light bg-inverse">
		<div class="portlet-title">
			<div class="caption">
				<i class="icon-equalizer font-blue"></i>
				<span class="caption-subject font-blue bold uppercase">
					Seleccione archivo PDF</span>
					<span class="caption-helper"></span>
				</div>
				<div class="actions">
					
				</div>
				<div style="float:right;">
				<a href="{% url 'viajes.views.listadoPdf'%}" class="btn default blue-stripe">
								
								<span class="hidden-480">
								Lista de  Archivos </span>
								</a>
				</div>				
			</div>
			<div class="portlet-body form">


				<form  action="{% url 'viajes.views.subirPDFMasivo' %}" method="post" enctype="multipart/form-data">{% csrf_token %} 


					<div class="form-body">						
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<hr>
									<a id="agregarCampo" class="btn btn-warning" href="#"><span class="glyphicon glyphicon-plus"></span> Agregar archivo (.pdf)</a>
									<br/><br/><br/>
									<div id="contenedor">
										<hr>	
									</div>
									<br/><br/>

									<button type="submit" class="btn green" id="export-btn" name="submit" size="40"> <i class="glyphicon glyphicon-arrow-up">&nbsp;&nbsp;</i>&nbsp;&nbsp; Subir Archivos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>						

								</div>
							</div>

						</div>						
					</div>





				</form>








				<!-- END FORM-->
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">					
				<div class="portlet">										
					<div class="portlet-body">										
						<div class="table-responsive" id="search-results">				

						</div>
					</div>
				</div>
			</div>								
		</div>

		{% endblock %}

		{% block extra_script %}
		<script type="text/javascript" src="{{MEDIA_URL}}plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
		<script type="text/javascript" src="{{MEDIA_URL}}plugins/select2/select2.js"></script>
		<script src="{{MEDIA_URL}}plugins/bootbox/bootbox.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="{{MEDIA_URL}}plugins/jquery-multi-select/js/jquery.multi-select.js"></script>
		{% endblock %}


		{% block script_ready %}
function llenaCampo(val){
alert('hola')
	
}
		////////////////////////////CARGA MASIVA PDF////////////////////////////////////////////
		var MaxInputs       = 10; //Número Maximo de Campos
		var contenedor       = $("#contenedor"); //ID del contenedor
		var AddButton       = $("#agregarCampo"); //ID del Botón Agregar

		//var x = número de campos existentes en el contenedor
		var x = $("#contenedor div").length + 1;
		var FieldCount = x-1; //para el seguimiento de los campos

		$(AddButton).click(function (e) {

		if(x <= MaxInputs) //max input box allowed
		{

		FieldCount++;
		//agregar campo
		var a = '<a class="btn btn-primary" href="javascript:;">';
		var b = '<span class="glyphicon glyphicon-paperclip">&nbsp;</span>	Selecione archivo';
		var c = '<input type="file" name="docfile" size="40" onchange="$(\'#upload-file-info\').html($(this).val());" id="campo_\'+ FieldCount +\'">';
		var d = '<input type="text" name="mitexto[]" id="campo2_\'+ FieldCount +\'" placeholder="Texto 1" value="" />';
		var e = '<a href="#" class="eliminar">&nbsp;&nbsp;&nbsp;&times;&nbsp;&nbsp;&nbsp;</a>';
		var z = '</a><br/><hr>';
		$(contenedor).append('<div>'+a+b+c+e+z+'</div>');
		x++; //text box increment
	}
	else{
   		alert("Solo podra cargar 10 archivos (.pdf)");
    }
	return false;
});


$("body").on("click",".eliminar", function(e){ //click en eliminar campo
if( x > 1 ) {
$(this).parent('div').remove(); //eliminar el campo
x--;
}
return false;
});

///////////////////////////////////////////////////////////////////////////////
		
{% endblock %}