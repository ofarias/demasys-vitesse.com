{% extends 'base.html' %}
{% load i18n %}
{% load url from future %}
{% load i18n humanize %}

{% block title %}{{action}} Solicitud{% endblock %}
{% block content_title %} Solicitud de Fondos {% endblock %}

{% block nav-Lista_Sol%}<li class="active">{% endblock %} <!-- se debe definir en Base.html para que se seleccione--> 
	
{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/bootstrap-datepicker/css/datepicker3.css">
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}plugins/select2/select2.css"/>

{% endblock %}

{% block breadcrumb %}
<ul class="page-breadcrumb">
	<li>
		<i class="fa fa-home"></i>
		<a href="{% url 'dashboards.views.index' %}">Dashboard</a>	
		<i class="fa fa-angle-right"></i>					
	</li>
	<li>		
		<a href="{% url 'solicitudes.views.index' %}">Solicitudes</a>	<!-- Esto se cambia con la vista de la aplicacion actual, que debe tener la classe Index-->
		<i class="fa fa-angle-right"></i>					
	</li>	
	<li>
		<a href="#">{{action}}</a>
	</li>
</ul>
{% endblock %}

{% block actions %}
{% endblock %}
{% block content %}

{% ifequal user alejandro.macias %}
	
{% else %}
  	<form action="" class="form-horizontal form-row-seperated" method="post">
											{% csrf_token %}
										   
											<div class="form-body">
													
													<div class="form-group {% if form.solicitante.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">{{form.solicitante.label}}<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-3">
														{{form.solicitante}}
														{% if form.solicitante.errors %}<span class="help-block">{{form.solicitante.errors}}</span>{% endif %}
													</div>
												</div>
													<div class="form-group {% if form.beneficiario.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Operadores<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-3">
														{{form.beneficiario}}
														{% if form.beneficiario.errors %}<span class="help-block">{{form.beneficiario.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.benef_otros.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Beneficiarios<span class="required" aria-required="False"> * </span></label>
													<div class="col-md-3">
														{{form.benef_otros}}
														{% if form.benef_otros.errors %}<span class="help-block">{{form.benef_otros.errors}}</span>{% endif %}
													</div>
												</div>
												  <div class="form-group {% if form.fecha.errors %}has-error{% endif %}">
												<label class="control-label col-md-3">Fecha de Solicitud<span class="required" aria-required="true"> * </span></label>
												<div class="col-md-3">
													<div class="input-group date date-picker" data-date-format="dd-mm-yyyy">
														{{form.fecha}}
														<span class="input-group-btn">
														  <button class="btn blue" type="button">
														       <i class="fa fa-calendar"></i>
														  </button>
														</span>
													 </div>
														{% if form.fecha.errors %}<span class="help-block">{{form.fecha.errors}}</span >{% endif %}
													</div >
												</div>											
												<div class="form-group {% if form.importe.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Importe<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-3">
														{{form.importe_asig}} 
														{% if form.importe_asig.errors %}<span class="help-block">{{form.importe_asig.errors}}</span>{% endif %}
													</div>
												</div>
												<div class="form-group {% if form.concepts.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Concepto<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-3">
													<div class = "readonly">
														{{form.concepts}}
														{% if form.concepts.errors %}<span class="help-block">{{form.concepts.errors}}</span>{% endif %}
													</div>
													</div >
												</div>
												<div class="form-group {% if form.refer.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Referencia<span class="required" aria-required="true"> * </span></label>
													<div class="col-md-3">
														{{form.refer}}
														{% if form.refer.errors %}<span class="help-block">{{form.refer.errors}}</span>{% endif %}
													</div>
												</div>	
												<div class="form-group {% if form.sol_bill.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Carta Porte<span class="required" aria-required="false">  </span></label>
													<div class="col-md-3">
														{{form.sol_bill}}
														{% if form.sol_bill.errors %}<span class="help-block">{{form.sol_bill.errors}}</span>{% endif %}
													</div>
												 </div>
												 <div class="form-group {% if form.cliente_paga.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Paga Cliente<span class="required" aria-required="false"> </span></label>
													<div class="col-md-9">
														{{form.cliente_paga}}
														{% if form.cliente_paga.errors %}<span class="help-block">{{form.cliente_paga.errors}}</span>{% endif %}
													</div>
												</div>	
												<div class="form-group {% if form.kilometraje.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Kilometraje<span class="required" aria-required="false"> </span></label>
													<div class="col-md-9">
														{{form.kilometraje}}
														{% if form.kilometraje.errors %}<span class="help-block">{{form.kilometraje.errors}}</span>{% endif %}
													</div>
												</div>
												 <div class="form-group {% if form.id_unidad.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Unidad<span class="required" aria-required="false">  </span></label>
													<div class="col-md-9">
														{{form.id_unidad}}
														{% if form.id_unidad.errors %}<span class="help-block">{{form.id_unidad.errors}}</span>{% endif %}
													</div>
												</div>	
												 <div class="form-group {% if form.fecha_aut.errors %}has-error{% endif %}">
												<label class="control-label col-md-3">Fecha de Aprobacion/Rechazo<span class="required" aria-required="true"> * </span></label>
												<div class="col-md-3">
													<div class="input-group date date-picker" data-date-format="dd-mm-yyyy">
														{{form.fecha_aut}}
														<span class="input-group-btn">
														  <button class="btn blue" type="button">
														       <i class="fa fa-calendar"></i>
														  </button>
														</span>
													 </div>
														{% if form.fecha_aut.errors %}<span class="help-block">{{form.fecha_aut.errors}}</span >{% endif %}
													</div >
												</div>	
												<div  class="form-group {% if form.colonia.errors %}has-error{% endif %}">
													<label class="control-label col-md-3">Motivo de Rechazo </label>
													<div class="col-md-3">
													<div class="controls readonly">
														 {{form.motivo_rech}}
														{% if form.motivo_rech.errors %}<span class="help-block">{{form.motivo_rech.errors}}</span>{% endif %}
													</div>
													</div >
												 </div>
												<div class="form-actions">
												<div class="row">
													<div class="col-md-offset-3 col-md-9">
														<button type="submit" name= "status" value = "2" class="btn blue" data-status = "2"><i class="fa fa-pencil"></i> {{action}}</button>
														<button type="submit" name="status" value="3" class="btn red" data-status="3">Rechazar</button>
													</div>
												</div>
											</div>
										</form>
												
{% endifequal %}

{% endblock %}



{% block extra_script %}
<script type="text/javascript" src="{{MEDIA_URL}}plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}plugins/select2/select2.js"></script>
{% endblock %}

<script type="text/javascript">
{% block script_ready %}
	
	
	var concepto = $("#id_concepts").val();
    var solbill = $("#id_sol_bill").val();

	$("#id_sol_bill").on("change",function(){
        solbill = $(this).val();
    })

    $("#id_concepts").on("change",function(){
        concepto = $(this).val();
    })

    $("#formularioDato").on('submit',function(ev){

		 if (usuario != dro){
            alert("Falta carta porte");
            return false;
        }
    })
	

    $('.date-picker').datepicker({
        rtl: Metronic.isRTL(),
        orientation: "auto",
        autoclose: true        
    });


  
{% endblock %}
</script>

