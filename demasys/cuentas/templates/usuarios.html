{% extends "base.html" %}
{% load i18n %}
{% load url from future %}
{% load bootstrap_pagination %}

{% block title %}Usuarios{% endblock %}
{% block content_title %} Catálogo de Usuarios{% endblock %}

{% block nav-usuarios %}<li class="active">{% endblock %}

{% block breadcrumb %}
<ul class="page-breadcrumb">
	<li>
		<i class="fa fa-home"></i>
		<a href="{% url 'dashboards.views.index' %}">Dashboard</a>	
		<i class="fa fa-angle-right"></i>					
	</li>
	<li>		
		<a href="#">Usuarios</a>						
	</li>	
</ul>
{% endblock %}

{% block actions %}
{% endblock %}

{% block content %}
		<div class="row">
            <div class="col-md-12">
				<div class="portlet box grey-cascade">
						<div class="portlet-title">
							<div class="caption">
								Usuarios
							</div>							
						</div>
						<div class="portlet-body">
							<div class="table-toolbar">
								<div class="row">
									<div class="col-md-6">
										<div class="btn-group">
											
						{% if user.is_authenticated  and user.is_superuser == True %} 					
											<a href="{% url 'cuentas.views.agregar_usuario' %}" class="btn blue">
											Agregar nuevo <i class="fa fa-plus"></i>
											</a>
						{% endif %}					
										</div>
									</div>
									<div class="col-md-6">
										
									</div>
								</div>
							</div>
							<div class="table-scrollable">
								<table class="table table-striped table-bordered table-hover" id="sample_1">
								<thead>
								<tr>
									<th>
										 Usuario
									</th>
									<th>
										 Nombre
									</th>
									<th>
										 Grupo(s)
									</th>
									<th>
										 E-mail
									</th>	
									<th>
										 Teléfono
									</th>
									<th>
										Activo
									</th>								
									<th>
										 Editar
									</th>																
								</tr>
								</thead>
								<tbody>
								{% for usuario in usuarios %}
								<tr class="odd gradeX">
									<td>
										{{usuario.user}}
									</td>
									<td>
										{{usuario.user.get_short_name}}
									</td>
									<td>
										<ul>{{usuario.user.groups.all|unordered_list}}</ul>
									</td>
									<td>
										{{usuario.user.email}}
									</td>
									<td>
										{{usuario.telefono}}
									</td>
									<td>
									{% if usuario.user.is_active %}
										<i class="glyphicon glyphicon-ok font-green"></i>
									{% else %}
										<i class="glyphicon glyphicon-remove font-red"></i>
									{% endif %}
								</td>								
									<td>
							{% if user.is_authenticated  and user.is_superuser == True %}			
										 <a href="{% url 'cuentas.views.editar_usuario' usuario.pk %}" class="btn default btn-xs blue-stripe">Editar</a>
							{% endif %}			 
									</td>									
								</tr>
								{% empty %}
								<tr>
									<td colspan="6" class="center">No se encontrarón datos.</td>
								</tr>
								{% endfor %}							
								</tbody>
								</table>
								{% bootstrap_paginate usuarios %}
							</div>
						</div>
					</div>					
            </div>
         </div>							
{% endblock %}